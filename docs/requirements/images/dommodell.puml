
' Layout / Stil
skinparam classAttributeIconSize 0
skinparam linetype ortho
skinparam nodesep 20
skinparam ranksep 60
left to right direction

@startuml

' Klassen (Deutsch)
class Studiengang {
  +id: String
  +name: String
}

class Modul {
  +modulId: String
  +name: String

  +moduluxUrl: String
}

class Lernset {
  +titel: String
}

class Quiz {
  +titel: String
  +beschreibung: String
}

class QuizSitzung {
  +Gelöste Fragen: int
  +Korrekt gelöste Fragen: int
  +Beendigungszeit: time
}

class Frage {
  +text: String
}

class AntwortMöglichkeit {
  +text: String
  +istKorrekt: Boolean
}

class Benutzer {
  +name: String
  +email: String
  +passwortHash: String
  +iqScore: int
  +freunde : Benutzer[]
}

class FreundesAnfrage {
}

class AktiverTag {
  +Zuletzt Aktiv: date
}

enum Fragetyp {
  MULTIPLE_CHOICE
  SINGLE_CHOICE
}

' Beziehungen / Multiplikationen (Empfohlen: Komposition dort, wo Besitz besteht)
Studiengang "1" o-- "0..*" Modul
Modul "1..*" o-- "1" Lernset
Lernset "1" o-- "0..*" Quiz

' Quiz als Aggregat: starke Besitzbeziehung
Quiz "1" *-- "0..*" QuizSitzung : verändert bei Lösen 
Quiz "1" *-- "1..*" Frage : besteht aus
Frage "1" *-- "1..*" AntwortMöglichkeit : hat
Frage -- Fragetyp : beschrieben durch

' Benutzer-Beziehungen
Benutzer "0..*" --o "1" Studiengang : gehört zu
Benutzer "1" *-- "0..*" QuizSitzung : entwickelt beim Quizlösen    
Benutzer "1" o-- "0..*" Quiz : erstellt
Benutzer "1" o-- "0..*" Lernset : erstellt
Benutzer "0..*" -- "0..*" Benutzer : befreundet mit
Benutzer "0..1" *-- "1" AktiverTag : zuletzt aktiv am

' Freundesanfragen
Benutzer "1" *-- "0..*" FreundesAnfrage : versendet
FreundesAnfrage "0..*" --* "1" Benutzer : an Empfänger


@enduml

' Enums sichtbar machen
Fragetyp ..> Frage : typ
' ----- Layout-Hinweise: versteckte Kanten zum Erzwingen von Spalten -----
' Ziel: linke Spalte (Studiengang/Modul/Lernset), Mitte (Quiz/Frage/Antwort), rechts (Benutzer/enums)
Studiengang -[hidden]-> Modul
Modul -[hidden]-> Lernset

' Achsen zwischen Spalten: setze Quiz rechts von Lernset, Benutzer rechts von Quiz
Lernset -[hidden]-> Quiz
Quiz -[hidden]-> Frage
Quiz -[hidden]-> Benutzer

' Versteckte Kanten zwischen oberen und unteren Elemente stabilisieren
Studiengang -[hidden]-> Quiz
Frage -[hidden]-> Benutzer


